!function(){var a=function(b,c,d){var e=a.resolve(b);if(null===e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports};a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){if(b=c[d],a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!==b[d]&&""!==b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}var d=a.normalize(b,".."),e=function(c){var d=e.resolve(c);return a(d,b,c)};return e.resolve=function(e){var f=e.charAt(0);if("/"==f)return e.slice(1);if("."==f)return a.normalize(d,e);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),e=g.slice(0,h+1).join("/")+"/deps/"+e},e.exists=function(b){return a.modules.hasOwnProperty(e.resolve(b))},e};var b=this;b.require="undefined"!=typeof b.require?b.require:a,function(){b.require.register("userde.sk/src/app.js",function(a,b,c){var d,e,f,g,h,i,j,k,l;f=b("./modules/firebase"),l=b("./modules/user"),e=b("./modules/account"),j=b("./modules/render"),k=b("./modules/state"),g=b("./modules/github"),i=b("./modules/options"),h=["modules/helpers","components/header","components/submit","components/notify","components/results","components/result","components/error","components/layout"],d=can.Control({init:function(){var a,c,d,e;for(e=[],c=0,d=h.length;d>c;c++)a=h[c],e.push(b("./"+a));return e},route:function(){var a;return a=b("./templates/page/index"),this.render(a)},":owner/:repo route":function(a){var c;return e(""+a.owner+"/"+a.repo),mixpanel.track("account",a),c=b("./templates/page/submit"),this.render(c,{},"Submit an issue")},"signup route":function(){var a;return a=b("./templates/page/signup"),this.render(a)},"login route":function(){var a;return a=b("./templates/page/login"),this.render(a)},render:function(a,b,c){return null==b&&(b={}),this.element.html(j(a,b)),document.title=c?""+c+" - userde.sk":"userde.sk"}}),c.exports=function(a){return f.attr("client",a.firebase),mixpanel.init(a.mixpanel),i.attr(a),new d(a.el),can.route.ready()}}),b.require.register("userde.sk/src/components/error.js",function(a,b,c){c.exports=can.Component.extend({tag:"app-error",template:b("../templates/error")})}),b.require.register("userde.sk/src/components/header.js",function(a,b,c){var d,e,f,g,h;d=b("../modules/account"),h=b("../modules/user"),e=b("../modules/firebase"),f=b("../modules/layout"),g=b("../modules/options"),c.exports=can.Component.extend({tag:"app-header",template:b("../templates/header"),scope:function(){return{account:{value:d},user:{value:h},layout:f}},events:{".icon.user click":function(a,b){return f.attr("showAccountDropdown",!f.showAccountDropdown),b.preventDefault(),!1}},helpers:{dropdownRight:function(){return $("app-header .icon.user").outerWidth()},isAdmin:function(a){var b;return(b=h().username)&&b===g.attr("admin")?a.fn(this):a.inverse(this)}}})}),b.require.register("userde.sk/src/components/layout.js",function(a,b,c){var d,e;e=b("../modules/layout"),d=b("../modules/firebase"),c.exports=can.Component.extend({tag:"app-layout",events:{click:function(a,b){var c;return c=this.element.find("#account .dropdown"),c.is(b.target)||c.has(b.target).length?void 0:e.attr("showAccountDropdown",!1)},".button.github click":function(){return d.login(function(a){var b;return a?(mixpanel.track("error",{where:"github.connect",what:b=a.toString()}),state.warn(b)):void 0})},".logout click":function(){return d.logout()}}})}),b.require.register("userde.sk/src/components/notify.js",function(a,b,c){var d;d=b("../modules/state"),c.exports=can.Component.extend({tag:"app-notify",template:b("../templates/notify"),scope:function(){return d},helpers:{isVisible:function(a){return"none"===d.attr("type")?a.inverse(this):a.fn(this)}}})}),b.require.register("userde.sk/src/components/result.js",function(a,b,c){c.exports=can.Component.extend({tag:"app-result",template:b("../templates/result")})}),b.require.register("userde.sk/src/components/results.js",function(a,b,c){var d;d=b("../modules/results"),c.exports=can.Component.extend({tag:"app-results",template:b("../templates/results"),scope:function(){return{results:d}}})}),b.require.register("userde.sk/src/components/submit.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;m=b("../modules/user"),f=b("../modules/github"),j=b("../modules/results"),l=b("../modules/state"),d=b("../modules/issue"),h=null,i=0,k=function(a){var b,c,d;return a.closest(".box").addClass("focus"),(c=a.val().trim().split(/\s+/).join(" OR "))?c!==h?(h=c,b=++i,(d=this.element.find(".searching")).show(),f.search(h,function(a,c){return d.hide(),b===i?a?mixpanel.track("error",{where:"github.search",what:a.toString()}):j.replace(c.items):void 0})):void 0:j.replace([])},n=!1,e=new can.Map({}),g=function(a,b,c){return a.toggleClass("closed eye eye-off"),b.toggle(),c.toggle(),c.height(b.height()),c.is(":visible")?c.html(marked(b.val())):b.focus()},c.exports=can.Component.extend({tag:"app-submit",template:b("../templates/submit"),scope:function(){return{user:{value:m},errors:e}},events:{".input.title keyup":_.debounce(k,1e3),".input.title focus":k,".input.title focusout":function(a){return a.closest(".box").removeClass("focus")},".button.primary.submit click":function(a){var b,c,g,h,i;if(b=function(){return n=!1,a.removeClass("disabled")},!n){n=!0,a.addClass("disabled"),c=new d,this.element.find(".input").each(function(a,b){var d,f;return b=$(b),d=b.data("key"),f=b.val(),e.removeAttr(d),c.attr(d,f)}),i=c.errors();for(g in i)h=i[g],e.attr(g,_.map(h,function(a){return{text:a}}));return can.Map.keys(e).length?b():(l.load("Sending"),mixpanel.track("submit"),f.submit(c.attr(),function(a,c){var d;return b(),a?(mixpanel.track("error",{where:"github.submit",what:d=a.toString()}),l.warn(d)):(l.info('Submitted as <a\n    class="link"\n    target="_blank"\n    href="'+c.html_url+'"\n>#'+c.number+"</a>"),setTimeout(function(){return window.location.replace(c.html_url)},3e3))}))}},".input.body keydown":function(a){return a.height(""),a.height(a.prop("scrollHeight")+"px")},".preview click":function(a){var b,c;return b=this.element.find(".input.body"),c=this.element.find("#preview"),g(a,b,c)},"#preview dblclick":function(){var a,b,c;return a=this.element.find(".preview"),b=this.element.find(".input.body"),c=this.element.find("#preview"),g(a,b,c)}}})}),b.require.register("userde.sk/src/modules/account.js",function(a,b,c){c.exports=can.compute("")}),b.require.register("userde.sk/src/modules/firebase.js",function(a,b,c){var d,e,f;f=b("./user"),e=b("../modules/state"),d=function(){},c.exports=new can.Map({setClient:function(a){var b;return b=new Firebase("https://"+a+".firebaseio.com"),e.load("Loading"),this.attr("auth",new FirebaseSimpleLogin(b,function(a,b){return a||!b?(b||e.none(),d(a)):(f(b),e.info(""+b.displayName+" is logged in"),d())})),b},login:function(a,b){return null==b&&(b="github"),this.client?(d=a,e.load("Connecting GitHub account"),this.auth.login(b,{rememberMe:!0,scope:"public_repo"})):a("Client is not setup")},logout:function(){var a;return null!=(a=this.auth)&&a.logout(),f({}),e.info("You have logged out")}})}),b.require.register("userde.sk/src/modules/github.js",function(a,b,c){var d,e,f,g,h,i;d=b("./account"),i=b("./user"),superagent.parse={"application/json":function(a){var b;try{return JSON.parse(a)}catch(c){return b=c,{}}}},c.exports={search:function(a,b){return g({path:"/search/issues",query:{q:""+a+"+repo:"+d(),sort:"updated",order:"desc"},headers:f()},b)},submit:function(a,b){return g({method:"post",path:"/repos/"+d()+"/issues",headers:f(),body:a},b)},exists:function(a){return g({path:"/repos/"+d(),headers:f()},a)}},g=function(a,b){var c,d,e,f,g,i,j,k,l,m,n,o,p;i=a.method,k=a.protocol,f=a.host,j=a.path,m=a.query,e=a.headers,c=a.body,d=!1,null==i&&(i="get"),l=m?"?"+function(){var a;a=[];for(g in m)p=m[g],a.push(""+g+"="+p);return a}().join("&"):"",n=superagent[i]("https://api.github.com"+j+l);for(g in e)p=e[g],n.set(g,p);return c&&n.send(c),o=setTimeout(function(){return d=!0,b("Request has timed out")},1e4),n.end(function(a,c){return d?void 0:(d=!0,clearTimeout(o),h(a,c,b))})},h=function(a,b,c){var d;return a?c(e(a)):2!==b.statusType?null!=(null!=b?null!=(d=b.body)?d.message:void 0:void 0)?c(b.body.message):c(b.error.message):c(null,b.body)},f=function(){var a,b;return a=_.extend({},{"Content-Type":"application/json",Accept:"application/vnd.github.v3"}),(b=i().accessToken)&&(a.Authorization="token "+b),a},e=function(a){var b;switch(!1){case!_.isString(a):b=a;break;case!_.isArray(a):b=a[1];break;case!(_.isObject(a)&&_.isString(a.message)):b=a.message}if(!b)try{b=JSON.stringify(a)}catch(c){b=a.toString()}return b}}),b.require.register("userde.sk/src/modules/helpers.js",function(a,b){var c,d,e,f;f=b("./user"),a.isLoggedIn=e=function(a){return _.has(f(),"username")?a.fn(this):a.inverse(this)},a.ago=c=function(a){return moment(a()).fromNow()},a.avatar=d=function(a){var b;return null==a&&(a=40),b=f().avatar_url+("&s="+a),can.Mustache.safeString("<img src='"+b+"'>")},Mustache.registerHelper("isLoggedIn",e),Mustache.registerHelper("ago",c),Mustache.registerHelper("avatar",d)}),b.require.register("userde.sk/src/modules/issue.js",function(a,b,c){c.exports=can.Map.extend({init:function(){return this.validatePresenceOf(["title"],{message:"Field cannot be empty"}),this.validatePresenceOf(["contact"],{message:"You need to connect with GitHub"})}},{})}),b.require.register("userde.sk/src/modules/layout.js",function(a,b,c){c.exports=new can.Map({showAccountDropdown:!1})}),b.require.register("userde.sk/src/modules/options.js",function(a,b,c){c.exports=new can.Map({})}),b.require.register("userde.sk/src/modules/render.js",function(a,b,c){c.exports=function(a,b){return null==b&&(b={}),can.view.mustache(a)(b)}}),b.require.register("userde.sk/src/modules/results.js",function(a,b,c){c.exports=new can.List([])}),b.require.register("userde.sk/src/modules/state.js",function(a,b,c){var d,e,f,g;e=3e3,g=function(a,b){switch(b){case"load":a+='<span class="icon spin6"></span>'}return this.attr("text",a).attr("type",b)},c.exports=d=new can.Map({text:null,type:"none",load:_.partialRight(g,"load"),info:_.partialRight(g,"info"),warn:_.partialRight(g,"warn"),none:function(){return this.attr("type","none")}}),f=null,d.bind("type",function(a,b){var c=this;return clearTimeout(f),"warn"!==b&&"load"!==b?setTimeout(function(){return c.attr("type","none")},e):void 0})}),b.require.register("userde.sk/src/modules/user.js",function(a,b,c){var d;c.exports=d=can.compute({}),d.bind("change",function(a,b){return mixpanel.people.set({$email:b.email,name:b.displayName}),mixpanel.identify(b.username)})}),b.require.register("userde.sk/src/templates/error.js",function(a,b,c){c.exports=['<span class="error message">{{ text }}.</span>'].join("\n")}),b.require.register("userde.sk/src/templates/header.js",function(a,b,c){c.exports=['<div id="header">','    <div class="wrapper">','        <div id="account">',"        {{ #isLoggedIn }}",'            <a class="icon user">{{ user.value.displayName }}</a>',"            {{ #if layout.showAccountDropdown }}",'            <div class="dropdown" style="right:{{ dropdownRight }}px">','                <div class="section profile">','                    <div class="avatar">','                        <!--<div class="icon user"></div>-->',"                        {{ avatar 40 }}","                    </div>",'                    <div class="email">',"                        {{ user.value.email }}","                    </div>",'                    <a class="primary button small settings">Settings</a>',"                </div>",'                <ul class="section menu">',"                {{ #isAdmin }}",'                    <li><a target="mixpanel" href="https://mixpanel.com/report/339487/">Analytics</a></li>',"                {{ /isAdmin }}",'                    <li><a class="logout">Logout</a></li>',"                </ul>","            </div>","            {{ /if }}","        {{ else }}",'            <div class="icon button small github">Connect with GitHub</div>',"        {{ /isLoggedIn }}","        </div>",'        <div id="title">userde.sk/{{ account.value }}</div>','        <div id="menu">',"            <!--","            <ul>","                <li>",'                    <a href="#">Link</a>',"                </li>","            </ul>","            -->","        </div>","    </div>","</div>"].join("\n")}),b.require.register("userde.sk/src/templates/notify.js",function(a,b,c){c.exports=["{{ #isVisible }}",'<div id="notify" class="{{ type }}">','    <div class="message">','        <div class="wrapper">','            <div class="content">',"                {{{ text }}}","            </div>","        </div>","    </div>","</div>","{{ /isVisible }}"].join("\n")}),b.require.register("userde.sk/src/templates/page/index.js",function(a,b,c){c.exports=['<app-layout class="index">','    <div id="hero">','        <h1 class="title">userde.sk</h1>','        <p class="subtitle">Your better customer support through GitHub Issues.</p>','        <div class="buttons">','            <a href="#!signup" class="button large primary signup">Signup</a>','            <div class="button large icon github">Connect with GitHub</div>',"        </div>","    </div>","</app-layout>"].join("\n")}),b.require.register("userde.sk/src/templates/page/login.js",function(a,b,c){c.exports=['<app-layout class="app box">','    <div id="promo" class="login box">','        <div class="left">','            <div class="title">userde.sk</div>','            <a class="link bottom">About the service</a>',"        </div>","",'        <div class="right">','            <div class="header">',"                <h1>Account Login</h1>","            </div>","            ",'            <div class="button primary">Login using GitHub</div>',"            ",'            <div class="bottom">','                <a class="link">New account</a>','                <a class="link">Login problems?</a>',"            </div>","        </div>","    </div>","</app-layout>"].join("\n")}),b.require.register("userde.sk/src/templates/page/signup.js",function(a,b,c){c.exports=['<app-layout class="app box">','    <div id="promo" class="signup box">','        <div class="left">','            <div class="title">userde.sk</div>','            <a class="link bottom">About the service</a>',"        </div>","",'        <div class="right">','            <div class="header">',"                <h1>Signup</h1>","            </div>","            ",'            <div class="form">','                <div class="box">','                    <div class="field">',"                        <h3>1. GitHub Username</h3>",'                        <input class="input" type="text" placeholder="Type your username here" value="@radekstepan" autofocus />',"                    </div>","                </div>","                ",'                <div class="box">','                    <div class="field">',"                        <h3>2. Contact</h3>","                        <label>Provide an email so that we can contact you when your account is ready.</label>",'                        <input class="input" type="text" placeholder="Email address" />',"                    </div>","                </div>","",'                <div class="box">','                    <div class="field">',"                        <h3>3. Message (optional)</h3>","                        <label>Do you have a special request? Anything we should know?</label>",'                        <textarea class="input" rows=4></textarea>',"                    </div>","                </div>","            </div>","",'            <div class="button primary">Send</div>',"",'            <div class="bottom">','                <a class="link">Check application status</a>',"            </div>","        </div>","    </div>","</app-layout>"].join("\n")}),b.require.register("userde.sk/src/templates/page/submit.js",function(a,b,c){c.exports=['<app-layout class="app">',"    <app-notify></app-notify>","    <app-header></app-header>","    <app-submit></app-submit>","</app-layout>"].join("\n")}),b.require.register("userde.sk/src/templates/result.js",function(a,b,c){c.exports=["{{ #closed_at }}",'<span class="tag closed">closed</span>',"{{ /closed_at }}","",'<a target="issue_{{ number }}" href="{{ html_url }}" class="link">{{ title }}</a>',"",'<span class="ago">{{ ago updated_at }}</span>'].join("\n")}),b.require.register("userde.sk/src/templates/results.js",function(a,b,c){c.exports=["{{ #if results.length }}",'<div id="results">',"    <ul>","        {{ #results }}","        <li><app-result></app-result></li>","        {{ /results }}","    </ul>","</div>","{{ /if }}"].join("\n")}),b.require.register("userde.sk/src/templates/submit.js",function(a,b,c){c.exports=['<div id="content" class="box">','    <div class="header">',"        <h2>How can we help?</h2>","        <p>Send us bugs you have encountered or suggestions.</p>","    </div>","",'    <div class="form">','        <div class="box">','            <div class="field">',"                <h3>1. Title</h3>","                <label>What question would you like to ask?</label>","                {{ #errors.title }}","                <app-error></app-error>","                {{ /errors.title }}",'                <span class="searching icon spin6"></span>',"                <input",'                    class="input title {{ #if errors.title.length }}error{{ /if }}"','                    data-key="title"','                    type="text"','                    placeholder="Type your question here"',"                    autofocus","                />","            </div>","            <app-results></app-results>","        </div>","",'        <div class="box">','            <div class="field">',"                <h3>2. Description</h3>","                <div>",'                    <span class="icon eye preview closed"></span>','                    <label>Describe the question you are asking. You can use <a target="_blank" href="https://help.github.com/articles/github-flavored-markdown" class="link">GitHub Flavored Markdown</a>.</label>',"                </div>","                {{ #errors.body }}","                <app-error></app-error>","                {{ /errors.body }}","                <textarea",'                    class="input body {{ #if errors.body.length }}error{{ /if }}"','                    data-key="body"','                    placeholder="Make it simple and easy to understand"',"                ></textarea>",'                <div id="preview"></div>',"            </div>","        </div>","",'        <div class="box">','            <div class="field">',"                <h3>3. Contact</h3>","                {{ #isLoggedIn }}",'                    Connected as {{ user.value.displayName }}. <a class="link logout">Logout</a>',"                    <input",'                        type="hidden"','                        class="input contact"','                        data-key="contact"','                        value="{{ user.value.email }}"',"                    />","                {{ else }}","                <!--",'                    <label>Provide either an email or connect with <a class="link">GitHub</a>.</label>','                    <div class="half first">','                        <input class="input" type="text" placeholder="Email address" />',"                    </div>",'                    <div class="half second">','                        <div class="button github">Connect with GitHub</div>',"                    </div>","                -->",'                    <label>Connect with <a class="link">GitHub</a>. Only your public profile is accessed.</label>','                    <div class="icon button github">Connect with GitHub</div>',"                    {{ #errors.contact }}","                    <app-error></app-error>","                    {{ /errors.contact }}","                {{ /isLoggedIn }}","            </div>","        </div>","    </div>","",'    <div class="footer">','        <div class="button primary submit">Finish</div>',"    </div>","</div>"].join("\n")})}();var c=b.require("userde.sk/src/app.js");"undefined"!=typeof define&&define.amd?(define("userde.sk",[],function(){return c}),define("userdesk",[],function(){return c})):"undefined"!=typeof module&&module.exports?module.exports=c:(b["userde.sk"]=c,b.userdesk=c),b.require.alias("userde.sk/src/app.js","userde.sk/index.js"),b.require.alias("userde.sk/src/app.js","userdesk/index.js")}();